# Time Tracker tmux hook configuration
#
# This hook records pane focus events for time tracking.
#
# Installation:
#   1. Ensure `tt` is in your PATH
#   2. Add to ~/.tmux.conf: source-file /path/to/config/tmux-hook.conf
#   3. Reload tmux: tmux source-file ~/.tmux.conf
#   4. IMPORTANT: Detach and reattach for focus-events to take effect
#
# Verify it's working:
#   - Switch between panes
#   - Check ~/.time-tracker/events.jsonl for new events

# Enable focus events (required for pane-focus-in hook)
set -g focus-events on

# Record pane focus changes for time tracking
# - Uses -ga (append) to not clobber other hooks on this event
# - Uses -b to run in background (non-blocking, prevents pane switch lag)
# - Quoting: outer single quotes for tmux, escaped inner quotes for shell args
set-hook -ga pane-focus-in 'run-shell -b "tt ingest pane-focus --pane \"#{pane_id}\" --cwd \"#{pane_current_path}\" --session \"#{session_name}\" --window \"#{window_index}\""'
